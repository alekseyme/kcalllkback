(this.webpackJsonpkolocall_admin=this.webpackJsonpkolocall_admin||[]).push([[0],{185:function(e,t){},260:function(e,t){},261:function(e,t){},345:function(e,t,a){},350:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(33),s=a.n(r),i=a(28),l=a(34),o=a(101),j=a(203),u=a(22),b={activeProject:null,projectLoading:!1,projectsList:null,tableLoading:!1,tableColumns:[],projectStatuses:[],tableData:null,tablePaginationConfig:null,searchParams:null,userInfo:null},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_INFO":return Object(u.a)(Object(u.a)({},e),{},{userInfo:t.payload});case"SET_ACTIVE_PROJECT":return Object(u.a)(Object(u.a)({},e),{},{activeProject:t.payload});case"SET_PROJECT_LOADING":return Object(u.a)(Object(u.a)({},e),{},{projectLoading:t.payload});case"SET_PROJECTS_LIST":return Object(u.a)(Object(u.a)({},e),{},{projectsList:t.payload});case"SET_PROJECT_STATUSES":return Object(u.a)(Object(u.a)({},e),{},{projectStatuses:t.payload});case"SET_TABLE_LOADING":return Object(u.a)(Object(u.a)({},e),{},{tableLoading:t.payload});case"SET_TABLE_COLUMNS":return Object(u.a)(Object(u.a)({},e),{},{tableColumns:t.payload});case"SET_TABLE_DATA":return Object(u.a)(Object(u.a)({},e),{},{tableData:t.payload});case"RESET_TABLE_DATA":return Object(u.a)(Object(u.a)({},e),{},{tableData:null});case"RESET_STORAGE":return Object(u.a)({},b);case"SET_TABLE_PAGINATIONCONFIG":return Object(u.a)(Object(u.a)({},e),{},{tablePaginationConfig:t.payload});case"SET_SEARCH_PARAMS":return Object(u.a)(Object(u.a)({},e),{},{searchParams:t.payload});default:return e}},O=Object(o.b)({projects:d}),m=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,h=Object(o.d)(O,m(Object(o.a)(j.a))),x=a(24),p=a.n(x),f=a(15),g=a(217),y=a.n(g),v=a(21),S=a(169),_=a.n(S),T=a(204),I=a(357),E=a(224),C=a(355),N=a(359),w=a(116),L=a(58),P=a(361),k=a(367),F=a(56),A=a.n(F),D=(a(254),function(e){return{type:"SET_USER_INFO",payload:e}}),R=function(e){return{type:"SET_PROJECT_LOADING",payload:e}},q=function(e){return{type:"SET_TABLE_LOADING",payload:e}},M=function(e){return{type:"SET_SEARCH_PARAMS",payload:e}},Y=function(e,t){return function(a){var n=e||{project:t};p.a.post("/project/search",n).then((function(e){var t=e.data,n={total:t.paginate.total,current_page:t.paginate.current_page,per_page:t.paginate.per_page},c=t.statuses.map((function(e){return{value:e}}));a({type:"SET_TABLE_PAGINATIONCONFIG",payload:n}),a(function(e){return{type:"SET_TABLE_DATA",payload:e}}(t.paginate.data)),a(function(e){return{type:"SET_PROJECT_STATUSES",payload:e}}(c))})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430")})).finally((function(){a(q(!1)),a(R(!1))}))}},B=a(220),z=a(3),V=function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(z.jsx)(B.a.Button,{style:{width:138}}),Object(z.jsx)(B.a.Button,{style:{width:220}})]}),Object(z.jsx)("div",{style:{marginTop:22},children:Object(z.jsx)(B.a,{title:!1,paragraph:{rows:6}})})]})},G=a(365),J=a(84),U=function(e){var t=e.activeProject,a=e.searchParams,n=c.a.useState(!1),r=Object(v.a)(n,2),s=r[0],i=r[1];return Object(z.jsx)(L.a,{loading:s,onClick:function(){i(!0);var e=Object(u.a)(Object(u.a)({},a),{},{project:t.value,fields:t.base_row.split(",")});p.a.post("/project/export",e).then((function(e){return function(e){var a=t.base_header.split(","),n=J.utils.book_new(),c=J.utils.json_to_sheet([]);J.utils.sheet_add_aoa(c,[a]),J.utils.sheet_add_json(c,e,{origin:"A2",skipHeader:!0}),J.utils.book_append_sheet(n,c,t.label),J.writeFile(n,t.label+"_".concat(Date.now())+".xlsx")}(e.data)})).finally((function(){return i(!1)}))},icon:Object(z.jsx)(G.a,{}),children:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442"})},K=function(e){var t=e.activeProject,a=Object(l.b)();return Object(z.jsx)(L.a,{style:{marginRight:8},onClick:function(){a(q(!0)),a(Y(null,t.value))},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})},H=function(){var e=Object(l.c)((function(e){return e.projects})),t=e.activeProject,a=e.tablePaginationConfig,n=e.searchParams;return Object(z.jsxs)("div",{className:"project-actions",children:[Object(z.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439: ",a.total]}),Object(z.jsxs)("div",{children:[Object(z.jsx)(K,{activeProject:t}),Object(z.jsx)(U,{activeProject:t,searchParams:n})]})]})},X=a(222),W=a(127),Q=a(363),Z=a(352),$=a(225),ee=a(358),te=a(354),ae=a(366),ne=a(66),ce=a(207),re=a.n(ce),se=function(e){var t=e.src;return Object(z.jsx)("audio",{controls:!0,src:null===t||void 0===t?void 0:t.url})},ie=function(){var e=Object(l.b)(),t=c.a.useState(null),a=Object(v.a)(t,2),n=a[0],r=a[1],s=c.a.useState(null),i=Object(v.a)(s,2),o=i[0],j=i[1],b=c.a.useState({}),d=Object(v.a)(b,2),O=d[0],m=d[1],h=Object(l.c)((function(e){return e.projects})),x=h.activeProject,f=h.tableLoading,g=h.tableColumns,y=h.tablePaginationConfig,S=h.tableData,_=h.searchParams,T=[].concat(Object(X.a)(g),[{title:"#",dataIndex:"actions",width:35,render:function(e,t){return Object(z.jsx)(Q.b,{split:Object(z.jsx)(Z.a,{type:"vertical"}),size:1,children:t.request_id?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)($.a,{content:o&&o.url===O[o.id]?Object(z.jsx)(se,{src:o}):"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430",trigger:"click",children:Object(z.jsx)(ee.a.Link,{onClick:function(){return function(e){if(O[e.id]){if(O[e.id]===o.url)return;j({id:e.id,url:O[e.id]})}else j(null),p()({url:"/da/".concat(e.request_id),method:"POST",responseType:"blob"}).then((function(t){var a=t.data,n=URL.createObjectURL(a);j({id:e.id,url:n});var c=Object(u.a)(Object(u.a)({},O),{},Object(W.a)({},e.id,n));m(c)}))}(t)},children:Object(z.jsx)(ae.a,{style:{fontSize:18,color:t.id===(null===o||void 0===o?void 0:o.id)&&"#52c41a"}})})}),Object(z.jsx)(ee.a.Link,{onClick:function(){return function(e){r(e.id);var t=e.time.replace(/[^\d]/g,"_");p()({url:"/da/".concat(e.request_id),method:"POST",responseType:"blob"}).then((function(a){var n=a.data;re()(n,t+"_"+e.number+".mp3")})).finally((function(){r(null)}))}(t)},children:t.id===n?Object(z.jsx)(ne.a,{style:{fontSize:18}}):Object(z.jsx)(G.a,{style:{fontSize:18}})})]}):null})}}]);return Object(z.jsx)(te.a,{size:"middle",className:"project-table",rowKey:function(e){return e.id},columns:T,dataSource:S,loading:{spinning:f,indicator:Object(z.jsx)(ne.a,{style:{fontSize:28},spin:!0})},pagination:{position:["bottomCenter"],current:y.current_page,total:y.total,pageSize:y.per_page,onChange:function(t,a){e(q(!0));var n={project:x.value,page:t,per_page:a,from:_?_.from:null,to:_?_.to:null,phone:_?_.phone:null,status:_?_.status:null};e(Y(n))},hideOnSinglePage:!0}})},le=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.projects})),a=t.activeProject,n=t.projectLoading,r=t.projectsList,s=t.tableData,i=t.searchParams,o=t.projectStatuses,j=t.userInfo,b=I.a.useForm(),d=Object(v.a)(b,1)[0],O=1===j.projects;c.a.useEffect((function(){r||p.a.post("/userprojects").then((function(t){var a=t.data.map((function(e){return{id:e.id,value:e.tablename,label:e.name,base_header:e.base_header,base_row:e.base_row}}));e({type:"SET_PROJECTS_LIST",payload:a}),O&&h(null,a[0])}))}),[]),c.a.useEffect((function(){a&&!s&&e(Y(null,a.value))}),[a]);var m=function(){var t=Object(T.a)(_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(M(null));case 2:d.resetFields();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(t,a){e(R(!0)),m();var n=a.base_header.split(","),c=a.base_row.split(","),r=n.map((function(e,t){return{title:e,dataIndex:c[t],width:"2px"}}));e({type:"RESET_TABLE_DATA"}),e({type:"SET_ACTIVE_PROJECT",payload:a}),e(function(e){return{type:"SET_TABLE_COLUMNS",payload:e}}(r))};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",children:[Object(z.jsxs)(I.a,{form:d,onFinish:function(t){var n;if(a)if(t.from||t.to||t.phone||t.status){var c=(null===(n=t.phone)||void 0===n?void 0:n.length)>10?t.phone.slice(1):t.phone,r=Object(u.a)(Object(u.a)({},t),{},{phone:c,from:t.from?t.from.format("YYYY-MM-DD"):null,to:t.to?t.to.format("YYYY-MM-DD"):null});e(q(!0)),e(M(Object(u.a)(Object(u.a)({},i),{},{from:r.from,to:r.to,phone:r.phone,status:r.status})));var s={project:a.value,from:r.from,to:r.to,phone:r.phone,status:r.status};e(Y(s))}else E.b.warning("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043f\u043e\u0438\u0441\u043a\u0430",2);else E.b.warning("\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442",2)},autoComplete:"off",initialValues:{from:i&&i.from?A()(i.from,"YYYY-MM-DD"):null,to:i&&i.to?A()(i.to,"YYYY-MM-DD"):null,phone:i?i.phone:null,status:i?i.status:null},layout:"inline",children:[Object(z.jsx)(I.a.Item,{name:"from",children:Object(z.jsx)(C.a,{placeholder:"\u0421"})}),Object(z.jsx)(I.a.Item,{name:"to",children:Object(z.jsx)(C.a,{placeholder:"\u041f\u043e"})}),Object(z.jsx)(I.a.Item,{name:"phone",children:Object(z.jsx)(N.a,{placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",prefix:Object(z.jsx)(k.a,{style:{color:"rgba(0, 0, 0, 0.25)"},rotate:90}),allowClear:!0})}),Object(z.jsx)(I.a.Item,{name:"status",children:Object(z.jsx)(w.a,{placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441",style:{width:202},options:o||null,allowClear:!0})}),Object(z.jsx)(I.a.Item,{children:Object(z.jsx)(L.a,{type:"primary",htmlType:"submit",children:"\u041f\u043e\u0438\u0441\u043a"})}),i&&Object(z.jsx)(I.a.Item,{children:Object(z.jsx)(L.a,{onClick:function(){e(q(!0)),m(),e(Y(null,a.value))},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})})]}),!O&&Object(z.jsx)(w.a,{value:a?a.label:null,showSearch:!0,style:{width:202,marginLeft:8},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",optionFilterProp:"label",onChange:h,options:r,filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0}})]}),Object(z.jsx)("div",{className:"box",children:n?Object(z.jsx)(V,{}):s?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(H,{}),Object(z.jsx)(ie,{})]}):O?Object(z.jsx)(V,{}):Object(z.jsx)("h1",{style:{textAlign:"center",marginBottom:0},children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442"})}),Object(z.jsx)(P.a,{})]})},oe=a(353),je=a(83),ue=a(35),be=a(369),de=a(370),Oe=a(371),me=a(372),he=a(373),xe=a(146),pe=a(362),fe=a(368),ge=function(e){var t=e.onLogout,a=Object(l.b)(),n=Object(ue.g)(),r=c.a.useState(!1),s=Object(v.a)(r,2),i=s[0],o=s[1];return Object(z.jsx)(L.a,{type:"text",onClick:function(){o(!0),p.a.post("/logout").then((function(){localStorage.clear(),t(),a({type:"RESET_STORAGE"}),n.push("/")})).catch((function(){return console.log("logout catch error")})).finally((function(){return o(!1)}))},className:"btn-logout",icon:Object(z.jsx)(fe.a,{}),loading:i,children:"\u0412\u044b\u0439\u0442\u0438"})},ye=function(e){var t=e.onLogout,a=localStorage.getItem("auth_name"),n=Object(z.jsx)(je.a,{children:Object(z.jsx)(ge,{onLogout:t})});return Object(z.jsxs)(z.Fragment,{children:[a?Object(z.jsx)("span",{style:{marginRight:8,fontWeight:600},children:a}):null,Object(z.jsx)(xe.a,{overlay:n,trigger:["click"],children:Object(z.jsx)(pe.a,{className:"user-avatar",children:a?a[0]:"-"})})]})},ve=a.p+"static/media/logo.c7696728.svg",Se=a.p+"static/media/brand_logo.e9581c6a.svg",_e=oe.a.Header,Te=oe.a.Content,Ie=oe.a.Sider,Ee=function(e){var t=e.onSuccessLogout,a=Object(ue.h)(),n=c.a.useState(!0),r=Object(v.a)(n,2),s=r[0],o=r[1],j=1===Object(l.c)((function(e){return e.projects})).userInfo.isadmin;return Object(z.jsxs)(oe.a,{children:[Object(z.jsxs)(Ie,{collapsible:!0,collapsed:s,onCollapse:function(){o((function(e){return!e}))},children:[Object(z.jsx)("div",{className:"brand-logo",children:Object(z.jsx)("img",{src:s?Se:ve,alt:"logo"})}),Object(z.jsxs)(je.a,{className:"menu",theme:"dark",defaultSelectedKeys:[a.pathname],mode:"inline",children:[Object(z.jsx)(je.a.Item,{icon:Object(z.jsx)(be.a,{}),children:Object(z.jsx)(i.b,{to:"/",children:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"})},"/"),j&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(je.a.Divider,{style:{backgroundColor:"#002140"}}),Object(z.jsx)(je.a.Item,{icon:Object(z.jsx)(de.a,{}),children:Object(z.jsx)(i.b,{to:"/dash",children:"\u0414\u0430\u0448\u0431\u043e\u0440\u0434"})},"/dash"),Object(z.jsx)(je.a.Item,{icon:Object(z.jsx)(Oe.a,{}),children:Object(z.jsx)(i.b,{to:"/projects",children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"})},"/projects"),Object(z.jsx)(je.a.Item,{icon:Object(z.jsx)(me.a,{}),children:Object(z.jsx)(i.b,{to:"/users",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"/users"),Object(z.jsx)(je.a.Item,{icon:Object(z.jsx)(he.a,{}),children:Object(z.jsx)(i.b,{to:"/managers",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u044b"})},"/managers")]})]})]}),Object(z.jsxs)(oe.a,{children:[Object(z.jsx)(_e,{children:Object(z.jsx)(ye,{onLogout:t})}),Object(z.jsx)(Te,{className:"site-layout",style:{padding:"0 32px"},children:Object(z.jsxs)(ue.d,{children:[Object(z.jsx)(ue.b,{exact:!0,path:"/",children:Object(z.jsx)(le,{})}),j&&Object(z.jsxs)(ue.d,{children:[Object(z.jsx)(ue.b,{exact:!0,path:"/dash",children:Object(z.jsx)(Ue,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/projects",children:Object(z.jsx)(ke,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/projects/:id/edit",children:Object(z.jsx)(we,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/projects/create",children:Object(z.jsx)(Le,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/users",children:Object(z.jsx)(Re,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/users/:id/edit",children:Object(z.jsx)(Ye,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/users/create",children:Object(z.jsx)(Me,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/managers",children:Object(z.jsx)(Fe,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/managers/:id/edit",children:Object(z.jsx)(De,{})}),Object(z.jsx)(ue.b,{exact:!0,path:"/managers/create",children:Object(z.jsx)(Ae,{})}),Object(z.jsx)(ue.a,{to:"/"})]}),Object(z.jsx)(ue.a,{to:"/"})]})})]})]})},Ce=a(212),Ne=function(){var e=Object(z.jsx)(ne.a,{style:{fontSize:28},spin:!0});return Object(z.jsx)("div",{style:{textAlign:"center",marginTop:"2px"},children:Object(z.jsx)(Ce.a,{indicator:e})})},we=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],r=c.a.useState([]),s=Object(v.a)(r,2),l=s[0],o=s[1],j=c.a.useState(!0),b=Object(v.a)(j,2),d=b[0],O=b[1],m=c.a.useState(!1),h=Object(v.a)(m,2),x=h[0],f=h[1],g=c.a.useState({}),y=Object(v.a)(g,2),S=y[0],_=y[1],T=Object(ue.i)().id;c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data.map((function(e){return{label:e.name,value:e.id}}));n(t)})).finally((function(){return console.log("users fetched at edit page")}))}),[]),c.a.useEffect((function(){p.a.get("/projects/".concat(T,"/edit")).then((function(e){var t=e.data;if(_(t),t.users.length>0){var a=t.users.map((function(e){return e.id}));o(a)}})).catch((function(e){return console.log(e)})).finally((function(){O(!1)}))}),[T]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/projects",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:d?Object(z.jsx)(Ne,{}):Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(I.a,{name:"basic",onFinish:function(e){f(!0);var t=Object(u.a)(Object(u.a)({},e),{},{users:l});p.a.put("/projects/".concat(T),t).then((function(e){var t=e.data;E.b.success(t.message)})).catch((function(e){E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return f(!1)}))},initialValues:S,autoComplete:"off",children:[Object(z.jsx)(I.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",name:"tablename",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b",tooltip:{title:"\u0427\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: ID,\u0418\u043c\u044f,\u0422\u0435\u043b\u0435\u0444\u043e\u043d"},name:"base_header",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",tooltip:{title:"\u041f\u043e\u043b\u044f \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0411\u0414 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: id,name,number"},name:"base_row",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(z.jsx)(w.a,{mode:"multiple",optionFilterProp:"label",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",defaultValue:l,onChange:function(e){o(e)},options:a})}),Object(z.jsx)(L.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:x,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})]})})})]})},Le=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],r=c.a.useState([]),s=Object(v.a)(r,2),l=s[0],o=s[1],j=c.a.useState(!1),b=Object(v.a)(j,2),d=b[0],O=b[1];c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data.map((function(e){return{label:e.name,value:e.id}}));n(t)})).finally((function(){return console.log("users fetched")}))}),[]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/projects",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:Object(z.jsxs)(I.a,{name:"basic",onFinish:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{users:l});O(!0),p.a.post("/projects",t).then((function(e){var t=e.data;console.log(t),E.b.success("\u041f\u0440\u043e\u0435\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")})).catch((function(e){console.log(e),E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return O(!1)}))},autoComplete:"off",children:[Object(z.jsx)(I.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",tooltip:{title:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u043c\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0438\u0437 \u0411\u0414"},name:"tablename",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b",tooltip:{title:"\u0427\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: ID,\u0418\u043c\u044f,\u0422\u0435\u043b\u0435\u0444\u043e\u043d"},name:"base_header",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",tooltip:{title:"\u041f\u043e\u043b\u044f \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432 \u0411\u0414 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e. \u041f\u0440\u0438\u043c\u0435\u0440: id,name,number"},name:"base_row",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0440\u043e\u043a\u0443 \u0442\u0430\u0431\u043b\u0438\u0446\u044b!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",children:Object(z.jsx)(w.a,{mode:"multiple",optionFilterProp:"label",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",defaultValue:l,onChange:function(e){o(e)},options:a})}),Object(z.jsx)(L.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:d,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})]})})]})},Pe=a(226),ke=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!0),s=Object(v.a)(r,2),l=s[0],o=s[1];c.a.useEffect((function(){p.a.get("/projects").then((function(e){var t=e.data;n(t)})).finally((function(){return o(!1)}))}),[]);var j=[{title:"\u041f\u0440\u043e\u0435\u043a\u0442",dataIndex:"name",key:"name"},{title:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",dataIndex:"tablename",key:"tablename"},{title:"\u0428\u0430\u043f\u043a\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",dataIndex:"base_header",key:"base_header"},{title:"\u0414\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f",dataIndex:"users",key:"users",render:function(e){if(e.length)return Object(z.jsx)(z.Fragment,{children:e.map((function(e){return Object(z.jsx)(Pe.a,{color:"blue",children:e.name},e.id)}))})}},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(z.jsxs)(Q.b,{size:"middle",children:[Object(z.jsx)(i.b,{to:"/projects/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"}),Object(z.jsx)(L.a,{type:"link",onClick:function(e){return function(e,t){var c=e.currentTarget;c.innerText="\u0423\u0434\u0430\u043b\u044f\u044e",p.a.delete("/projects/".concat(t)).then((function(e){var c=e.data,r=a.filter((function(e){return e.id!==t}));n(r),E.b.success(c.message)})).catch((function(e){return console.log(e)})).finally((function(){c.innerText="\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}))}(e,t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}}];return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/projects/create",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(z.jsx)(Ne,{}):Object(z.jsx)(te.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:j,dataSource:a,pagination:{hideOnSinglePage:!0}})})]})},Fe=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!0),s=Object(v.a)(r,2),l=s[0],o=s[1];c.a.useEffect((function(){p.a.get("/managers").then((function(e){var t=e.data;n(t)})).finally((function(){return o(!1)}))}),[]);var j=[{title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",dataIndex:"name",key:"name"},{title:"E-mail",dataIndex:"email",key:"email"},{title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",dataIndex:"phone",key:"phone"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(z.jsxs)(Q.b,{size:"middle",children:[Object(z.jsx)(i.b,{to:"/managers/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"}),Object(z.jsx)(L.a,{type:"link",onClick:function(e){return function(e,t){var c=e.currentTarget;c.innerText="\u0423\u0434\u0430\u043b\u044f\u044e",p.a.delete("/managers/".concat(t)).then((function(e){var c=e.data,r=a.filter((function(e){return e.id!==t}));n(r),E.b.success(c.message)})).catch((function(e){return console.log(e)})).finally((function(){c.innerText="\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}))}(e,t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}}];return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/managers/create",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(z.jsx)(Ne,{}):Object(z.jsx)(te.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:j,dataSource:a,pagination:{hideOnSinglePage:!0}})})]})},Ae=function(){var e=c.a.useState(!1),t=Object(v.a)(e,2),a=t[0],n=t[1];return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u041d\u043e\u0432\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/managers",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:Object(z.jsxs)(I.a,{name:"basic",onFinish:function(e){n(!0),p.a.post("/managers",e).then((function(e){var t=e.data;E.b.success(t.message)})).catch((function(){E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return n(!1)}))},initialValues:{isadmin:!1},autoComplete:"off",children:[Object(z.jsx)(I.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"E-mail",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0422\u0435\u043b\u0435\u0444\u043e\u043d!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(L.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:a,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"})]})})]})},De=function(){var e=c.a.useState(!0),t=Object(v.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!1),s=Object(v.a)(r,2),l=s[0],o=s[1],j=c.a.useState({}),b=Object(v.a)(j,2),d=b[0],O=b[1],m=Object(ue.i)().id;c.a.useEffect((function(){p.a.get("/managers/".concat(m,"/edit")).then((function(e){var t=e.data;O(t)})).catch((function(e){return console.log(e)})).finally((function(){n(!1)}))}),[m]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/managers",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:a?Object(z.jsx)(Ne,{}):Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(I.a,{name:"basic",onFinish:function(e){o(!0);var t=Object(u.a)({},e);p.a.put("/managers/".concat(m),t).then((function(e){var t=e.data;E.b.success(t.message)})).catch((function(){E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return o(!1)}))},initialValues:d,autoComplete:"off",children:[Object(z.jsx)(I.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"E-mail",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0422\u0435\u043b\u0435\u0444\u043e\u043d!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(L.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:l,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"})]})})})]})},Re=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!0),s=Object(v.a)(r,2),l=s[0],o=s[1];c.a.useEffect((function(){p.a.get("/users").then((function(e){var t=e.data;n(t)})).finally((function(){return o(!1)}))}),[]);var j=[{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",dataIndex:"name",key:"name",render:function(e,t){return Object(z.jsx)(z.Fragment,{children:t.isadmin?Object(z.jsxs)(z.Fragment,{children:[t.name," ",Object(z.jsx)(Pe.a,{children:"admin"})]}):t.name})}},{title:"\u041b\u043e\u0433\u0438\u043d",dataIndex:"username",key:"username"},{title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",dataIndex:"manager",key:"manager",render:function(e){return Object(z.jsx)(z.Fragment,{children:null===e||void 0===e?void 0:e.name})}},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return Object(z.jsxs)(Q.b,{size:"middle",children:[Object(z.jsx)(i.b,{to:"/users/".concat(t.id,"/edit"),children:"\u0420\u0435\u0434"}),Object(z.jsx)(L.a,{type:"link",onClick:function(e){return function(e,t){var c=e.currentTarget;c.innerText="\u0423\u0434\u0430\u043b\u044f\u044e",p.a.delete("/users/".concat(t)).then((function(e){var c=e.data,r=a.filter((function(e){return e.id!==t}));n(r),E.b.success(c.message)})).catch((function(e){return console.log(e)})).finally((function(){c.innerText="\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}))}(e,t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(z.jsx)(L.a,{type:"link",onClick:function(){return function(e){var t=prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c");t&&(console.log(e,t),p.a.patch("/user/changepwd",{userid:e,password:t}).then((function(e){var t=e.data;E.b.success(t.message)})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u043f\u0430\u0440\u043e\u043b\u044f")})))}(t.id)},children:"\u0421\u0431\u0440\u043e\u0441 \u043f\u0430\u0440\u043e\u043b\u044f"})]})}}];return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/users/create",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:l?Object(z.jsx)(Ne,{}):Object(z.jsx)(te.a,{style:{width:"100%"},rowKey:function(e){return e.id},columns:j,dataSource:a,pagination:{hideOnSinglePage:!0}})})]})},qe=a(117),Me=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],r=c.a.useState(null),s=Object(v.a)(r,2),l=s[0],o=s[1],j=c.a.useState(!1),b=Object(v.a)(j,2),d=b[0],O=b[1];c.a.useEffect((function(){p.a.get("/managers").then((function(e){var t=e.data.map((function(e){return{label:e.name,value:e.id}}));n(t)})).catch((function(){return E.b.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0438 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432")}))}),[]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/users",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:Object(z.jsxs)(I.a,{name:"basic",onFinish:function(e){var t=Object(u.a)(Object(u.a)({},e),{},{manager:l});O(!0),p.a.post("/users",t).then((function(e){var t=e.data;E.b.success(t.message)})).catch((function(){E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return O(!1)}))},initialValues:{isadmin:!1},autoComplete:"off",children:[Object(z.jsx)(I.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(z.jsx)(N.a.Password,{})}),Object(z.jsx)(I.a.Item,{name:"isadmin",valuePropName:"checked",children:Object(z.jsx)(qe.a,{children:"\u0410\u0434\u043c\u0438\u043d"})}),Object(z.jsx)(I.a.Item,{name:"manager",label:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430!"}],children:Object(z.jsx)(w.a,{optionFilterProp:"label",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430",onChange:function(e){o(e)},options:a})}),Object(z.jsx)(L.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:d,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})]})},Ye=function(){var e=c.a.useState([]),t=Object(v.a)(e,2),a=t[0],n=t[1],r=c.a.useState(null),s=Object(v.a)(r,2),l=s[0],o=s[1],j=c.a.useState(!0),b=Object(v.a)(j,2),d=b[0],O=b[1],m=c.a.useState(!1),h=Object(v.a)(m,2),x=h[0],f=h[1],g=c.a.useState({}),y=Object(v.a)(g,2),S=y[0],_=y[1],T=Object(ue.i)().id;c.a.useEffect((function(){p.a.get("/users/".concat(T,"/edit")).then((function(e){var t=e.data;_(t.user),t.user.manager&&o(t.user.manager.id);var a=t.managers.map((function(e){return{label:e.name,value:e.id}}));n(a)})).catch((function(e){return console.log(e)})).finally((function(){O(!1)}))}),[T]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"controls box",style:{padding:"14px 25px"},children:[Object(z.jsx)("b",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(z.jsx)(L.a,{type:"primary",style:{marginLeft:"auto"},children:Object(z.jsx)(i.b,{to:"/users",children:"\u041d\u0430\u0437\u0430\u0434"})})]}),Object(z.jsx)("div",{className:"box",style:{marginTop:20},children:d?Object(z.jsx)(Ne,{}):Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(I.a,{name:"basic",onFinish:function(e){f(!0);var t=Object(u.a)(Object(u.a)({},e),{},{manager:l});p.a.put("/users/".concat(T),t).then((function(e){var t=e.data;E.b.success(t.message)})).catch((function(){E.b.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){return f(!1)}))},initialValues:S,autoComplete:"off",children:[Object(z.jsx)(I.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(z.jsx)(N.a,{})}),Object(z.jsx)(I.a.Item,{name:"isadmin",valuePropName:"checked",children:Object(z.jsx)(qe.a,{children:"\u0410\u0434\u043c\u0438\u043d"})}),Object(z.jsx)(I.a.Item,{label:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",children:Object(z.jsx)(w.a,{optionFilterProp:"label",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430",defaultValue:l,onChange:function(e){o(e)},options:a})}),Object(z.jsx)(L.a,{className:"btn-resource",type:"primary",htmlType:"submit",loading:x,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})})]})},Be=a(364),ze=a(103),Ve=a(60),Ge=a(356),Je=a(360),Ue=function(){var e=Object(l.c)((function(e){return e.projects})).userInfo.manager,t=Math.floor(950*Math.random())+1;return Object(z.jsxs)(z.Fragment,{children:[t<300&&Object(z.jsx)(Be.a,{style:{marginTop:22},message:"\u041e\u0431\u0440\u0430\u0449\u0430\u0435\u043c \u0412\u0430\u0448\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435!",description:"\u0423 \u0432\u0430\u0441 \u043e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u043d\u0435 \u0442\u0430\u043a \u043c\u043d\u043e\u0433\u043e \u043c\u0438\u043d\u0443\u0442. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u043f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u0447\u0451\u0442",type:"error",closable:!0,onClose:function(e){console.log(e,"I was closed.")}}),Object(z.jsxs)(ze.a,{gutter:22,style:{marginTop:22},children:[Object(z.jsx)(Ve.a,{span:6,children:Object(z.jsxs)(Ge.a,{children:[Object(z.jsx)(Je.a,{title:"\u0412\u0430\u0448 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",value:(null===e||void 0===e?void 0:e.name)||"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u043d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d"}),e&&Object(z.jsxs)(z.Fragment,{children:[e.email,", \u0434\u043e\u0431. ",e.phone]})]})}),Object(z.jsx)(Ve.a,{span:6,children:Object(z.jsx)(Ge.a,{children:Object(z.jsx)(Je.a,{title:"\u041e\u0441\u0442\u0430\u0442\u043e\u043a \u043c\u0438\u043d\u0443\u0442 \u043f\u043e \u0442\u0430\u0440\u0438\u0444\u0443",value:t,valueStyle:{color:t>300?"#3f8600":"#cf1322"},suffix:"/ 1000"})})}),Object(z.jsx)(Ve.a,{span:6,children:Object(z.jsx)(Ge.a,{children:Object(z.jsx)(Je.a,{title:"\u0417\u0432\u043e\u043d\u043a\u043e\u0432 \u0441\u0435\u0433\u043e\u0434\u043d\u044f",value:34})})}),Object(z.jsx)(Ve.a,{span:6,children:Object(z.jsx)(Ge.a,{children:Object(z.jsx)(Je.a,{title:"\u0417\u0432\u043e\u043d\u043a\u043e\u0432 \u0432\u0447\u0435\u0440\u0430",value:81})})})]})]})},Ke=a(374),He=function(e){var t=e.onLogin,a=c.a.useState(!1),n=Object(v.a)(a,2),r=n[0],s=n[1],i=Object(l.b)(),o=Object(ue.g)();return Object(z.jsxs)("div",{className:"login",children:[Object(z.jsx)("img",{style:{width:"80px",marginBottom:24},src:Se,alt:"barndlogo"}),Object(z.jsxs)(I.a,{className:"login-form",onFinish:function(e){s(!0),p.a.get("/csrf-cookie").then((function(){p.a.post("/login",e).then((function(e){var a=e.data;localStorage.setItem("auth_name",a.name),i(D(a)),t(),o.push("/")})).catch((function(e){return E.b.error(e.response.data.message)}))})).finally((function(){return s(!1)}))},autoComplete:"off",size:"large",children:[Object(z.jsx)(I.a.Item,{name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d!"}],children:Object(z.jsx)(N.a,{prefix:Object(z.jsx)(me.a,{className:"site-form-item-icon"}),placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(z.jsx)(I.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}],children:Object(z.jsx)(N.a.Password,{prefix:Object(z.jsx)(Ke.a,{className:"site-form-item-icon"}),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(z.jsx)(I.a.Item,{children:Object(z.jsx)(L.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:r,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},Xe=function(){var e=Object(z.jsx)(ne.a,{style:{fontSize:44},spin:!0});return Object(z.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:Object(z.jsx)(Ce.a,{size:"large",indicator:e})})},We=(a(345),function(){var e=Object(l.b)(),t=c.a.useState(!1),a=Object(v.a)(t,2),n=a[0],r=a[1],s=c.a.useState(!1),i=Object(v.a)(s,2),o=i[0],j=i[1];return c.a.useEffect((function(){p.a.post("me").then((function(t){var a=t.data;e(D(a)),j(!0),r(!0)})).catch((function(){j(!0),r(!1)}))}),[]),n?Object(z.jsx)(Ee,{onSuccessLogout:function(){r(!1)}}):o?Object(z.jsx)(He,{onLogin:function(){r(!0)}}):Object(z.jsx)(Xe,{})});p.a.defaults.baseURL="http://localhost:8000/api",p.a.defaults.withCredentials=!0,p.a.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status||419===e.response.status?(localStorage.getItem("auth_name")&&(localStorage.clear(),window.location.reload()),Promise.reject()):Promise.reject(e)})),s.a.render(Object(z.jsx)(c.a.StrictMode,{children:Object(z.jsx)(f.b,{locale:y.a,children:Object(z.jsx)(i.a,{children:Object(z.jsx)(l.a,{store:h,children:Object(z.jsx)(We,{})})})})}),document.getElementById("root"))}},[[350,1,2]]]);
//# sourceMappingURL=main.8bab83bf.chunk.js.map